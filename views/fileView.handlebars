<div class="file-page">
	<div class="top-bar">
		<div class="inner">
			<div class="container">
				<img class="logo" src="http://thunderbayurc.com/images/logo.png">
				<p>URC Thunder Bay</p>
			</div>
			<div class="container">
				<a class="sign-out" href="{{path}}/logout">{{user.userName}} <i class="fa fa-sign-out"></i></a>
			</div>
		</div>
	</div>
	<div class="main">
		<div class="inner">
			<div id="content" class="content">
				<div class="toolbar">
					<div class="breadcrumbs">
						<a href="#">Home</a>
						<i class="fa fa-angle-right"></i>
						<a href="#">sub folder</a>
						<i class="fa fa-angle-right"></i>
						<a href="#">inner folder</a>
					</div>
					<div class="tool-container">
						<i id="uploadButton" class="fa fa-upload fa-2x fa-fw"></i>
						<span id="createFolderButton" class="fa-stack">
							<i class="fa fa-folder-o fa-stack-2x fa-fw"></i>
							<i class="fa fa-plus-circle fa-stack-1x"></i>
						</span>
						<i class="fa fa-pencil fa-2x fa-fw"></i>
						<i class="fa fa-trash-o fa-2x fa-fw"></i>
					</div>
				</div>
				<div class="break"></div>
				<table class="file-table">
					<thead>
						<tr>
							<th class="shrink text-center"><i class="fa fa-circle-o"></i></th>
							<th class="indent">Filename</th>
							<th class="shrink">Created By</th>
						</tr>
					</thead>
					<tbody>
						{{#each files}}
						<tr>
							<td><i class="fa fa-circle-o"></i></td>
							<td class="description-td">
								<i class="fa fa-{{this.type}}-o fa-fw"></i>
								<div class="text">
									<p>{{this.filename}}</p>
									<p class="sub">{{this.time}}</p>
								</div>
							</td>
							<td>{{this.created_by}}</td>
						</tr>
						{{/each}}
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div id="shade" class="shade" data-close-popup=true>
		{{> uploadPopup }}
		{{> createFolderPopup }}
	</div>
</div>

<script type="text/javascript">
	var shade = document.getElementById("shade")
	var uploadButton = document.getElementById("uploadButton")
	var uploadPopup = document.getElementById("uploadPopup")
	var createFolderButton = document.getElementById("createFolderButton")
	var createFolderPopup = document.getElementById("createFolderPopup")

	function generatePopupTl(popup) {
		var tl = new TimelineMax({
			onStart: function() {
				shade.style.display = "flex"
				popup.style.display = "block"
			},
			onReverseComplete: function() {
				shade.style.display = "none"
				popup.style.display = "none"
				shade.removeEventListener("click", closeShade)
				tl.clear()
			}
		})

		var closeShade = function(e) {
			if (e.target.dataset.closePopup && tl.progress() == 1) {
				tl.reverse()
			}
		}

		tl.fromTo(shade, 0.2, { opacity: 0 }, { opacity: 1 })
		tl.fromTo(popup, 0.35, { opacity: 0, y: -75 }, { opacity: 1, y: 0 })

		shade.addEventListener("click", closeShade)
	}

	uploadButton.onclick = function() {
		generatePopupTl(uploadPopup)
	}
	createFolderButton.onclick = function() {
		generatePopupTl(createFolderPopup)
	}
</script>